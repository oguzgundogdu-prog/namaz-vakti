(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();const U=document.getElementById("location-name"),le=document.getElementById("date-display"),de=document.getElementById("next-prayer-name"),ue=document.getElementById("countdown"),Z=document.getElementById("prayer-times-list"),ce=document.getElementById("nafile-list"),me="https://api.aladhan.com/v1/timings",V=13,W={Tahajjud:"Teheccüd",Fajr:"İmsak",Sunrise:"Güneş",Dhuhr:"Öğle",Asr:"İkindi",Maghrib:"Akşam",Isha:"Yatsı"},$=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];let u=null,X=null,T=null,v={};async function he(){ge();try{const e=await ke(),{latitude:t,longitude:a}=e.coords;x={latitude:t,longitude:a},await q(t,a),await ye(t,a)}catch(e){console.error("Konum hatası:",e),U.textContent="İstanbul",x={latitude:41.0082,longitude:28.9784},await q(41.0082,28.9784)}}function ke(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t):t(new Error("Geolocation not supported"))})}async function ye(e,t){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&accept-language=tr`)).json();if(n&&n.address){const i=n.address.city||n.address.town||n.address.village||n.address.state||"İstanbul";U.textContent=i}}catch(a){console.error("Konum ismi alınamadı:",a)}}async function q(e,t){try{const a=Math.floor(Date.now()/1e3),n=`${me}/${a}?latitude=${e}&longitude=${t}&method=${V}`,r=await(await fetch(n)).json();if(r.code===200)u=r.data,fe(),ve(),be(),Ee(),ee();else throw new Error("API error")}catch(a){console.error("Namaz vakitleri alınamadı:",a),Z.innerHTML='<p style="text-align:center;">Veriler yüklenemedi. Lütfen tekrar deneyin.</p>'}}function fe(){if(!u||!u.timings)return;const e=u.timings.Fajr,[t,a]=e.split(":").map(Number),n=new Date;n.setHours(t,a,0,0);const i=new Date(n.getTime()-3600*1e3),r=i.getHours().toString().padStart(2,"0"),s=i.getMinutes().toString().padStart(2,"0");u.timings.Tahajjud=`${r}:${s}`}function be(){if(!u)return;const e=u.timings,t=new Date;Z.innerHTML=$.map(a=>{const n=e[a],[i,r]=n.split(":").map(Number),s=new Date;return s.setHours(i,r,0,0),`
      <div class="prayer-item ${s<t?"past":""}" data-prayer="${a}">
        <span class="prayer-name">${W[a]}</span>
        <span class="prayer-time">${n}</span>
      </div>
    `}).join("")}function ee(){if(!u)return;const e=u.timings,t=new Date;let a=null,n=!1;for(const i of $){const r=e[i],[s,l]=r.split(":").map(Number),d=new Date;if(d.setHours(s,l,0,0),d>t){a={key:i,time:d};break}}if(!a){const i=$[0],r=e[i],[s,l]=r.split(":").map(Number),d=new Date;d.setDate(d.getDate()+1),d.setHours(s,l,0,0),a={key:i,time:d},n=!0}X=a.time,document.querySelectorAll(".prayer-item").forEach(i=>{i.dataset.prayer===a.key&&!n&&i.classList.add("active")}),T&&clearInterval(T),N(a.key,n),T=setInterval(()=>N(a.key,n),1e3)}function N(e,t){const n=X-new Date;if(n<0){ee();return}const i=Math.floor(n/(1e3*60*60)),r=Math.floor(n%(1e3*60*60)/(1e3*60)),s=Math.floor(n%(1e3*60)/1e3);ue.textContent=`${w(i)}:${w(r)}:${w(s)}`;const l=W[e];de.textContent=t?`${l} (Yarın)`:l}function ge(){const e=new Date,t={day:"2-digit",month:"long",year:"numeric"},a=e.toLocaleDateString("tr-TR",t);le.textContent=a}function w(e){return e.toString().padStart(2,"0")}function pe(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");if(!e||e.length===0){console.warn("Tab buttons not found");return}e.forEach(a=>{a.addEventListener("click",function(){const n=this.getAttribute("data-tab");e.forEach(r=>r.classList.remove("active")),t.forEach(r=>r.classList.remove("active")),this.classList.add("active");const i=document.getElementById(n+"-content");i&&i.classList.add("active")})})}function ve(){if(!u||!u.timings)return;const e=u.timings,t=O(e.Sunrise),a=new Date(t.getTime()+1200*1e3),n=new Date;n.setHours(10,30,0,0);const i=O(e.Maghrib),r=new Date(i.getTime()+900*1e3);v={israk:L(a),kusluk:L(n),evvabin:L(r)}}function O(e){const[t,a]=e.split(":").map(Number),n=new Date;return n.setHours(t,a,0,0),n}function L(e){const t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return`${t}:${a}`}function Ee(){var a;const e=[{id:"teheccud",name:"Teheccüd",time:((a=u==null?void 0:u.timings)==null?void 0:a.Tahajjud)||"--:--",description:"İmsak'tan 1 saat önce"},{id:"israk",name:"İşrak",time:v.israk,description:"Güneş doğduktan 20 dk sonra"},{id:"kusluk",name:"Kuşluk",time:v.kusluk,description:"Sabah ortası"},{id:"evvabin",name:"Evvabin",time:v.evvabin,description:"Akşam-Yatsı arası"}],t=te();ce.innerHTML=e.map(n=>{const i=t[n.id]||!1;return`
      <div class="nafile-item ${i?"completed":""}" data-prayer-id="${n.id}">
        <div class="nafile-item-info">
          <div class="nafile-name">${n.name}</div>
          <div class="nafile-time">${n.time} - ${n.description}</div>
        </div>
        <label class="nafile-checkbox">
          <input type="checkbox" id="nafile-${n.id}" name="nafile-${n.id}" ${i?"checked":""} onchange="handleNafileCheckbox('${n.id}', this.checked)">
          <span class="checkbox-custom"></span>
        </label>
      </div>
    `}).join("")}function ze(e,t){xe(e,t);const a=document.querySelector(`[data-prayer-id="${e}"]`);t?a.classList.add("completed"):a.classList.remove("completed")}function xe(e,t){const a=te();a[e]=t,localStorage.setItem("nafileCheckboxes",JSON.stringify(a))}function te(){const e=new Date().toDateString(),t=localStorage.getItem("nafileCheckboxes");return localStorage.getItem("nafileCheckboxesDate")!==e?(localStorage.setItem("nafileCheckboxesDate",e),localStorage.removeItem("nafileCheckboxes"),{}):t?JSON.parse(t):{}}window.handleNafileCheckbox=ze;let c=new Date().getMonth(),h=new Date().getFullYear(),z=null,x={latitude:41.0082,longitude:28.9784};const P=document.getElementById("settings-btn"),ae=document.getElementById("settings-sidebar"),M=document.getElementById("sidebar-overlay"),H=document.getElementById("sidebar-close-btn"),R=document.querySelectorAll(".sidebar-tab-btn"),K=document.getElementById("prev-month-btn"),Q=document.getElementById("next-month-btn"),G=document.getElementById("current-month-display"),D=document.getElementById("calendar-tbody"),S=document.getElementById("quotes-list");function Me(){ae.classList.add("active"),M.classList.add("active"),document.body.style.overflow="hidden"}function ne(){ae.classList.remove("active"),M.classList.remove("active"),document.body.style.overflow=""}P&&P.addEventListener("click",()=>{Me(),z||A(h,c+1),S&&S.children.length===0&&Ce()});H&&H.addEventListener("click",ne);M&&M.addEventListener("click",ne);R.forEach(e=>{e.addEventListener("click",function(){const t=this.getAttribute("data-sidebar-tab");R.forEach(n=>n.classList.remove("active")),document.querySelectorAll(".sidebar-tab-content").forEach(n=>{n.classList.remove("active")}),this.classList.add("active");const a=document.getElementById(t+"-content");a&&a.classList.add("active")})});K&&K.addEventListener("click",()=>{c--,c<0&&(c=11,h--),A(h,c+1)});Q&&Q.addEventListener("click",()=>{c++,c>11&&(c=0,h++),A(h,c+1)});async function A(e,t){try{const a=`https://api.aladhan.com/v1/calendar/${e}/${t}?latitude=${x.latitude}&longitude=${x.longitude}&method=${V}`,i=await(await fetch(a)).json();if(i.code===200&&i.data)z=i.data,De(),Se();else throw new Error("Calendar API error")}catch(a){console.error("Aylık takvim yüklenemedi:",a),D&&(D.innerHTML='<tr><td colspan="7" style="text-align:center; padding:20px;">Takvim yüklenemedi</td></tr>')}}function y(e){return e?e.split(" ")[0]:"--:--"}function De(){if(!z||!D)return;const e=new Date,t=e.getDate(),a=e.getMonth(),n=e.getFullYear(),i=c===a&&h===n;D.innerHTML=z.map((r,s)=>{const l=r.timings,d=s+1;return`
      <tr class="${i&&d===t?"today":""}">
        <td>${d}</td>
        <td>${y(l.Fajr)}</td>
        <td>${y(l.Sunrise)}</td>
        <td>${y(l.Dhuhr)}</td>
        <td>${y(l.Asr)}</td>
        <td>${y(l.Maghrib)}</td>
        <td>${y(l.Isha)}</td>
      </tr>
    `}).join("")}function Se(){if(!G)return;const e=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];G.textContent=`${e[c]} ${h}`}function Ce(){if(!S)return;const e=[{text:"Gelirsiniz ver bana tarikat, sonra bırakırsınız, namaza başlar, bırakırsınız, çarşafı giyer, çıkarırsınız.",author:"Mahmud Efendi (k.s)"},{text:`Şalvar giymekten utanırsınız, sakal, cübbe, çarşaf, uzun entari, bakın İslam kıyafetidir bu. Sen bunları giymekle "ben Müslüman'ım, benim sağlığımda islamiyete kimse yan bakamaz" demek istiyorsun.`,author:"Mahmud Efendi (k.s)"},{text:"Çarşaflarınızı muhafaza ediyorsunuz Elhamdülillah, ama bilmiyorum entarileriniz nasıldır?",author:"Mahmud Efendi (k.s)"},{text:"Kadınların şerefi gizli kalmalarında ve erkeklerle görüşmemelerindedir. Kadın çalışacak diye tutturmuş, sonra aç kalırlarmış. Sen karışmasana, o Allahu Teala yarattığının rızkını verir.",author:"Mahmud Efendi (k.s)"},{text:"Sizin çarşafınız bizim sarığımız, şalvarımız, sizi gören alacağını alıyor, birde tatlı sözlen konuşursan onunla, tamam.",author:"Mahmud Efendi (k.s)"},{text:"Dilenci at üstünde gelse vereceksin, şüpheleniyorsan az ver, şüphelenmiyorsan çok ver.",author:"Mahmud Efendi (k.s)"},{text:"Aklı başında olan adamın evinde televizyon olmaz.",author:"Mahmud Efendi (k.s)"},{text:"En büyük günah sorulursa, nedir? Kafirlere meyletmektir.",author:"Mahmud Efendi (k.s)"},{text:"Karınca bacağı kadar olsa bile ekmek atmayın, bu bizi helak eder.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon hiç Mevla'yı hatırlatır mı? Zehir zakkum akıtıyor.",author:"Mahmud Efendi (k.s)"},{text:"Ruh ile beden bir olmazsa bir milyon kere Allah (c.c) desen boş.",author:"Mahmud Efendi (k.s)"},{text:"Çarşaf giymekle büyük yiğitlik yapıyorsunuz, milletin tesettüre heves etmesine sebep oluyorsunuz.",author:"Mahmud Efendi (k.s)"},{text:"Çarşafınızı iyi muhafaza edin. Şunu yakinen bilin ki; bir çarşafı, bir sarığı bozmakla Çeçenistan'a gelen belayı bize de verebilir Cenab-ı hak.",author:"Mahmud Efendi (k.s)"},{text:"Can vermeli çarşaftan vazgeçmemeli, ne güzel şeydir o.",author:"Mahmud Efendi (k.s)"},{text:"Bu çarşafı giyen hanımlar, bilseler onların sayesinde neler oluyor, yatarken de giyerler. Siz ki Allah için tesettürünüzü muhafaza ettiniz O da sizi muhafaza eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir Hoca yüzbin televizyondan daha tesirlidir.",author:"Mahmud Efendi (k.s)"},{text:"Rabıta muhabbetle olur, muhabbette ittiba ile olur. İttiba edersen seversin ve sevilirsin.",author:"Mahmud Efendi (k.s)"},{text:"Mektubattan uzak kalındığı an feyiz kesilir.",author:"Mahmud Efendi (k.s)"},{text:"Sarığı kabul etmeyenin Peygamberimiz (s.a.v.), Cebrail (a.s.), Allah-u Teala (c.c.)'de kabul etmiyor.",author:"Mahmud Efendi (k.s)"},{text:"Dünya içinde herşey melundur, fakat zikrullah ile meşgul olan emri bil maruf nehy-i anil münker yapan okuyan ve okutan değildir.",author:"Mahmud Efendi (k.s)"},{text:"Avrupa modasına uymak, namazı terk etmekten daha ağır geliyor.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon seyreden dinini sevmiyor demektir.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse asılacağından korktuğu gibi imandan küfre döneceğinden de öyle korkacak.",author:"Mahmud Efendi (k.s)"},{text:"Sen nefsini hak ile meşgul etmezsen, nefis seni batıl ile meşgul eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse emri bil maruf yapacağım diye yola çıksa sonra siyasetten bahsetse, onun azabını kimse ölçemez.",author:"Mahmud Efendi (k.s)"},{text:"Dünya sevgisi insanı şaraptan daha sarhoş eder ve ateşe girmeye cesaret verir.",author:"Mahmud Efendi (k.s)"},{text:"Kalın kafalı nefse uyarsan her yerde rezilsin.",author:"Mahmud Efendi (k.s)"},{text:"İnsan bir nefes sağ olsa çok ilerler.",author:"Mahmud Efendi (k.s)"},{text:"Bütün haramlar nefse dostluk, Mevla'ya (c.c.) düşmanlıktır.",author:"Mahmud Efendi (k.s)"},{text:"Gezdiğimiz yerlerde talebe var, medrese yapacak para yok. Milyarlar gidiyor başka yerlere ama medreseye para yok. Bunların hepsi ahirette acısını çekecek.",author:"Mahmud Efendi (k.s)"},{text:"İlim, amel, ihlas. Üçü bir arada olsun, bunları cemet, dünyayı fethedersin.",author:"Mahmud Efendi (k.s)"},{text:"İnsanlar et gibi, ulemâ tuz gibidir. Tuzsuz et koktuğu gibi, ulemâdan ve onların sohbetinden mahrum kalanlar da kokar.",author:"Mahmud Efendi (k.s)"},{text:"Ey talebeler! Sizler kurumuş toprakların yağmur yüklü bulutlarısınız. Direksiz kubbelerin direklerisiniz.",author:"Mahmud Efendi (k.s)"},{text:"Bugünkü tahsil ölümden ötesini haber vermiyor. Buna siz nasıl yüksek tahsil dersiniz?",author:"Mahmud Efendi (k.s)"},{text:"Bir adam bir kişiye Kur'ân okutsa bütün dünyaya bedeldir. Bize Kur'ân okuyup okutmak ufak bir şey mi geliyor?",author:"Mahmud Efendi (k.s)"},{text:"Bilgisiz bir kimse savaş davuluna benzer; sesi çoktur, içi boştur.",author:"Mahmud Efendi (k.s)"},{text:"İki kişi iki kişiyi kıskanmaz; baba oğlunu, hoca talebesini.",author:"Mahmud Efendi (k.s)"},{text:"Hocaların bir âdeti var: bir âyeti okusalar veya dinleseler, söylemek için hemen cemaat gelir hatırına. Halbuki hatırına önce kendini getirmeli. Farkında değil, başkalarına iyilik edecek, kendini yakacak.",author:"Mahmud Efendi (k.s)"},{text:"İlmi olup da okutmayan, evlerinde boş boş oturan hoca hanımlar keşke iki talebe de olsa okutsaydım da âhirete ev hanımı vasfında gelmeseydim diyecek, bu yola hizmet etmediklerine çok pişman olacaklar.",author:"Mahmud Efendi (k.s)"}];S.innerHTML=e.map(t=>`
    <div class="quote-card">
      <p class="quote-text">${t.text}</p>
      <p class="quote-author">— ${t.author}</p>
    </div>
  `).join("")}const m=document.getElementById("quote-modal-overlay"),F=document.getElementById("quote-modal-close"),Y=document.getElementById("quote-modal-text");function Be(){return[{text:"Gelirsiniz ver bana tarikat, sonra bırakırsınız, namaza başlar, bırakırsınız, çarşafı giyer, çıkarırsınız.",author:"Mahmud Efendi (k.s)"},{text:`Şalvar giymekten utanırsınız, sakal, cübbe, çarşaf, uzun entari, bakın İslam kıyafetidir bu. Sen bunları giymekle "ben Müslüman'ım, benim sağlığımda islamiyete kimse yan bakamaz" demek istiyorsun.`,author:"Mahmud Efendi (k.s)"},{text:"Çarşaflarınızı muhafaza ediyorsunuz Elhamdülillah, ama bilmiyorum entarileriniz nasıldır?",author:"Mahmud Efendi (k.s)"},{text:"Kadınların şerefi gizli kalmalarında ve erkeklerle görüşmemelerindedir. Kadın çalışacak diye tutturmuş, sonra aç kalırlarmış. Sen karışmasana, o Allahu Teala yarattığının rızkını verir.",author:"Mahmud Efendi (k.s)"},{text:"Sizin çarşafınız bizim sarığımız, şalvarımız, sizi gören alacağını alıyor, birde tatlı sözlen konuşursan onunla, tamam.",author:"Mahmud Efendi (k.s)"},{text:"Dilenci at üstünde gelse vereceksin, şüpheleniyorsan az ver, şüphelenmiyorsan çok ver.",author:"Mahmud Efendi (k.s)"},{text:"Aklı başında olan adamın evinde televizyon olmaz.",author:"Mahmud Efendi (k.s)"},{text:"En büyük günah sorulursa, nedir? Kafirlere meyletmektir.",author:"Mahmud Efendi (k.s)"},{text:"Karınca bacağı kadar olsa bile ekmek atmayın, bu bizi helak eder.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon hiç Mevla'yı hatırlatır mı? Zehir zakkum akıtıyor.",author:"Mahmud Efendi (k.s)"},{text:"Ruh ile beden bir olmazsa bir milyon kere Allah (c.c) desen boş.",author:"Mahmud Efendi (k.s)"},{text:"Çarşaf giymekle büyük yiğitlik yapıyorsunuz, milletin tesettüre heves etmesine sebep oluyorsunuz.",author:"Mahmud Efendi (k.s)"},{text:"Çarşafınızı iyi muhafaza edin. Şunu yakinen bilin ki; bir çarşafı, bir sarığı bozmakla Çeçenistan'a gelen belayı bize de verebilir Cenab-ı hak.",author:"Mahmud Efendi (k.s)"},{text:"Can vermeli çarşaftan vazgeçmemeli, ne güzel şeydir o.",author:"Mahmud Efendi (k.s)"},{text:"Bu çarşafı giyen hanımlar, bilseler onların sayesinde neler oluyor, yatarken de giyerler. Siz ki Allah için tesettürünüzü muhafaza ettiniz O da sizi muhafaza eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir Hoca yüzbin televizyondan daha tesirlidir.",author:"Mahmud Efendi (k.s)"},{text:"Rabıta muhabbetle olur, muhabbette ittiba ile olur. İttiba edersen seversin ve sevilirsin.",author:"Mahmud Efendi (k.s)"},{text:"Mektubattan uzak kalındığı an feyiz kesilir.",author:"Mahmud Efendi (k.s)"},{text:"Sarığı kabul etmeyenin Peygamberimiz (s.a.v.), Cebrail (a.s.), Allah-u Teala (c.c.)'de kabul etmiyor.",author:"Mahmud Efendi (k.s)"},{text:"Dünya içinde herşey melundur, fakat zikrullah ile meşgul olan emri bil maruf nehy-i anil münker yapan okuyan ve okutan değildir.",author:"Mahmud Efendi (k.s)"},{text:"Avrupa modasına uymak, namazı terk etmekten daha ağır geliyor.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon seyreden dinini sevmiyor demektir.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse asılacağından korktuğu gibi imandan küfre döneceğinden de öyle korkacak.",author:"Mahmud Efendi (k.s)"},{text:"Sen nefsini hak ile meşgul etmezsen, nefis seni batıl ile meşgul eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse emri bil maruf yapacağım diye yola çıksa sonra siyasetten bahsetse, onun azabını kimse ölçemez.",author:"Mahmud Efendi (k.s)"},{text:"Dünya sevgisi insanı şaraptan daha sarhoş eder ve ateşe girmeye cesaret verir.",author:"Mahmud Efendi (k.s)"},{text:"Kalın kafalı nefse uyarsan her yerde rezilsin.",author:"Mahmud Efendi (k.s)"},{text:"İnsan bir nefes sağ olsa çok ilerler.",author:"Mahmud Efendi (k.s)"},{text:"Bütün haramlar nefse dostluk, Mevla'ya (c.c.) düşmanlıktır.",author:"Mahmud Efendi (k.s)"},{text:"Gezdiğimiz yerlerde talebe var, medrese yapacak para yok. Milyarlar gidiyor başka yerlere ama medreseye para yok. Bunların hepsi ahirette acısını çekecek.",author:"Mahmud Efendi (k.s)"},{text:"İlim, amel, ihlas. Üçü bir arada olsun, bunları cemet, dünyayı fethedersin.",author:"Mahmud Efendi (k.s)"},{text:"İnsanlar et gibi, ulemâ tuz gibidir. Tuzsuz et koktuğu gibi, ulemâdan ve onların sohbetinden mahrum kalanlar da kokar.",author:"Mahmud Efendi (k.s)"},{text:"Ey talebeler! Sizler kurumuş toprakların yağmur yüklü bulutlarısınız. Direksiz kubbelerin direklerisiniz.",author:"Mahmud Efendi (k.s)"},{text:"Bugünkü tahsil ölümden ötesini haber vermiyor. Buna siz nasıl yüksek tahsil dersiniz?",author:"Mahmud Efendi (k.s)"},{text:"Bir adam bir kişiye Kur'ân okutsa bütün dünyaya bedeldir. Bize Kur'ân okuyup okutmak ufak bir şey mi geliyor?",author:"Mahmud Efendi (k.s)"},{text:"Bilgisiz bir kimse savaş davuluna benzer; sesi çoktur, içi boştur.",author:"Mahmud Efendi (k.s)"},{text:"İki kişi iki kişiyi kıskanmaz; baba oğlunu, hoca talebesini.",author:"Mahmud Efendi (k.s)"},{text:"Hocaların bir âdeti var: bir âyeti okusalar veya dinleseler, söylemek için hemen cemaat gelir hatırına. Halbuki hatırına önce kendini getirmeli. Farkında değil, başkalarına iyilik edecek, kendini yakacak.",author:"Mahmud Efendi (k.s)"},{text:"İlmi olup da okutmayan, evlerinde boş boş oturan hoca hanımlar keşke iki talebe de olsa okutsaydım da âhirete ev hanımı vasfında gelmeseydim diyecek, bu yola hizmet etmediklerine çok pişman olacaklar.",author:"Mahmud Efendi (k.s)"}]}function Te(){const e=Be(),t=Math.floor(Math.random()*e.length),a=e[t];Y&&(Y.textContent=a.text),setTimeout(()=>{m&&m.classList.add("active")},800)}function ie(){m&&m.classList.remove("active")}F&&F.addEventListener("click",ie);m&&m.addEventListener("click",e=>{e.target===m&&ie()});pe();he();Te();const re="qadaPrayerData",we={counters:{fajr:0,dhuhr:0,asr:0,maghrib:0,isha:0},dailyGoal:2,today:{date:j(),completed:0,prayers:[]},history:[]};function j(){return new Date().toISOString().split("T")[0]}function Le(){try{const e=localStorage.getItem(re);if(e){const t=JSON.parse(e);return oe(t),t}}catch(e){console.error("Error loading qada data:",e)}return{...we}}function f(e){try{localStorage.setItem(re,JSON.stringify(e))}catch(t){console.error("Error saving qada data:",t),alert("Veri kaydedilemedi. Tarayıcı hafızası dolu olabilir.")}}function oe(e){const t=j();e.today.date!==t&&(e.today.completed>0&&(e.history.push({date:e.today.date,completed:e.today.completed,prayers:[...e.today.prayers]}),e.history.length>365&&(e.history=e.history.slice(-365))),e.today={date:t,completed:0,prayers:[]},f(e))}let o=Le();function Ie(e){o.counters[e]<9999&&(o.counters[e]++,f(o),k())}function $e(e){o.counters[e]>0&&(o.counters[e]--,f(o),k())}function Ae(e){const t=document.querySelector(`button[onclick="markQadaComplete('${e}')"]`);if(o.today.prayers.includes(e))o.today.prayers=o.today.prayers.filter(n=>n!==e),o.today.completed--,o.counters[e]++,t.classList.remove("completed");else if(o.counters[e]>0)o.today.prayers.push(e),o.today.completed++,o.counters[e]--,t.classList.add("completed");else{alert("Bu namazın kaza sayısı sıfır!");return}f(o),k(),C()}function je(){return Object.values(o.counters).reduce((e,t)=>e+t,0)}function qe(){const e=o.history.slice(-7),t=e.reduce((i,r)=>i+r.completed,0);e.length>0&&(t/7).toFixed(1);const a=o.today.completed,n=t+a;return{total:n,average:(n/7).toFixed(1)}}function k(){["fajr","dhuhr","asr","maghrib","isha"].forEach(r=>{const s=document.getElementById(`counter-${r}`);s&&(s.textContent=o.counters[r]);const l=document.querySelector(`button[onclick="markQadaComplete('${r}')"]`);l&&(o.today.prayers.includes(r)?l.classList.add("completed"):l.classList.remove("completed"))});const t=document.getElementById("total-qada");t&&(t.textContent=je());const a=qe(),n=document.getElementById("stat-7days"),i=document.getElementById("stat-average");n&&(n.textContent=a.total),i&&(i.textContent=a.average)}function C(){const e=document.getElementById("today-progress-text"),t=document.getElementById("today-progress-bar"),a=o.today.completed,n=o.dailyGoal,i=Math.min(a/n*100,100);e&&(e.textContent=`${a}/${n} kaza kılındı`),t&&(t.style.width=`${i}%`)}const E=document.getElementById("daily-goal");E&&(E.value=o.dailyGoal,E.addEventListener("change",e=>{o.dailyGoal=parseInt(e.target.value),f(o),C()}));const _=document.getElementById("export-qada-btn");_&&_.addEventListener("click",()=>{const e=JSON.stringify(o,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`kaza_namazlari_${j()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),alert("Yedek dosyası indirildi! ✅")});const J=document.getElementById("import-qada-btn"),p=document.getElementById("import-qada-file");J&&p&&(J.addEventListener("click",()=>{p.click()}),p.addEventListener("change",e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=n=>{try{const i=JSON.parse(n.target.result);if(!i.counters||!i.dailyGoal)throw new Error("Geçersiz dosya formatı");confirm("Mevcut veriler silinecek ve yedek yüklenecek. Devam edilsin mi?")&&(o=i,oe(o),f(o),E.value=o.dailyGoal,k(),C(),alert("Yedek başarıyla yüklendi! ✅"))}catch(i){console.error("Import error:",i),alert("Geçersiz yedek dosyası! ❌")}p.value=""},a.readAsText(t)}));document.querySelectorAll(".counter-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.prayer,a=e.dataset.action;a==="increment"?Ie(t):a==="decrement"&&$e(t)})});document.querySelectorAll(".complete-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.prayer;Ae(t)})});function Ne(){const e=o.history.slice(-7),t=o.history.slice(-30),a=e.reduce((b,B)=>b+B.completed,0),n=t.reduce((b,B)=>b+B.completed,0),i=o.today.completed,r=a+i,s=n+i,l=(r/7).toFixed(1),d=[...o.history,o.today],g=Math.max(...d.map(b=>b.completed),0);return{total7Days:r,total30Days:s,average:l,bestDay:g}}function Oe(){const e=Ne(),t=document.getElementById("stat-7days"),a=document.getElementById("stat-30days"),n=document.getElementById("stat-average"),i=document.getElementById("stat-best");t&&(t.textContent=e.total7Days),a&&(a.textContent=e.total30Days),n&&(n.textContent=e.average),i&&(i.textContent=e.bestDay)}let I=null;function se(){const e=document.getElementById("qadaChart");if(!e)return;const t=e.getContext("2d"),a=o.history.slice(-30),n=[],i=[];for(let r=29;r>=0;r--){const s=new Date;s.setDate(s.getDate()-r);const l=s.toISOString().split("T")[0],d=a.find(g=>g.date===l);n.push(s.getDate()),i.push(d?d.completed:0)}n.push("Bugün"),i.push(o.today.completed),I&&I.destroy(),I=new Chart(t,{type:"line",data:{labels:n,datasets:[{label:"Kılınan Kaza",data:i,borderColor:"rgb(6, 182, 212)",backgroundColor:"rgba(6, 182, 212, 0.1)",tension:.4,fill:!0,pointBackgroundColor:"rgb(6, 182, 212)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",padding:12,displayColors:!1,callbacks:{label:function(r){return r.parsed.y+" kaza kılındı"}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"rgba(255, 255, 255, 0.7)",font:{size:11}},grid:{color:"rgba(255, 255, 255, 0.1)",drawBorder:!1}},x:{ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:10},maxRotation:0,autoSkip:!0,maxTicksLimit:15},grid:{display:!1,drawBorder:!1}}}}})}const Pe=k;k=function(){Pe(),Oe(),typeof Chart<"u"&&se()};k();C();setTimeout(()=>{typeof Chart<"u"&&se()},100);

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();const F=document.getElementById("location-name"),ne=document.getElementById("date-display"),ie=document.getElementById("next-prayer-name"),re=document.getElementById("countdown"),Q=document.getElementById("prayer-times-list"),oe=document.getElementById("nafile-list"),se="https://api.aladhan.com/v1/timings",Y=13,_={Tahajjud:"Teheccüd",Fajr:"İmsak",Sunrise:"Güneş",Dhuhr:"Öğle",Asr:"İkindi",Maghrib:"Akşam",Isha:"Yatsı"},D=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];let l=null,J=null,M=null,f={};async function le(){he();try{const e=await de(),{latitude:t,longitude:a}=e.coords;v={latitude:t,longitude:a},await I(t,a),await ue(t,a)}catch(e){console.error("Konum hatası:",e),F.textContent="İstanbul",v={latitude:41.0082,longitude:28.9784},await I(41.0082,28.9784)}}function de(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t):t(new Error("Geolocation not supported"))})}async function ue(e,t){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&accept-language=tr`)).json();if(n&&n.address){const i=n.address.city||n.address.town||n.address.village||n.address.state||"İstanbul";F.textContent=i}}catch(a){console.error("Konum ismi alınamadı:",a)}}async function I(e,t){try{const a=Math.floor(Date.now()/1e3),n=`${se}/${a}?latitude=${e}&longitude=${t}&method=${Y}`,r=await(await fetch(n)).json();if(r.code===200)l=r.data,me(),ye(),ce(),fe(),U();else throw new Error("API error")}catch(a){console.error("Namaz vakitleri alınamadı:",a),Q.innerHTML='<p style="text-align:center;">Veriler yüklenemedi. Lütfen tekrar deneyin.</p>'}}function me(){if(!l||!l.timings)return;const e=l.timings.Fajr,[t,a]=e.split(":").map(Number),n=new Date;n.setHours(t,a,0,0);const i=new Date(n.getTime()-3600*1e3),r=i.getHours().toString().padStart(2,"0"),o=i.getMinutes().toString().padStart(2,"0");l.timings.Tahajjud=`${r}:${o}`}function ce(){if(!l)return;const e=l.timings,t=new Date;Q.innerHTML=D.map(a=>{const n=e[a],[i,r]=n.split(":").map(Number),o=new Date;return o.setHours(i,r,0,0),`
      <div class="prayer-item ${o<t?"past":""}" data-prayer="${a}">
        <span class="prayer-name">${_[a]}</span>
        <span class="prayer-time">${n}</span>
      </div>
    `}).join("")}function U(){if(!l)return;const e=l.timings,t=new Date;let a=null,n=!1;for(const i of D){const r=e[i],[o,s]=r.split(":").map(Number),u=new Date;if(u.setHours(o,s,0,0),u>t){a={key:i,time:u};break}}if(!a){const i=D[0],r=e[i],[o,s]=r.split(":").map(Number),u=new Date;u.setDate(u.getDate()+1),u.setHours(o,s,0,0),a={key:i,time:u},n=!0}J=a.time,document.querySelectorAll(".prayer-item").forEach(i=>{i.dataset.prayer===a.key&&!n&&i.classList.add("active")}),M&&clearInterval(M),$(a.key,n),M=setInterval(()=>$(a.key,n),1e3)}function $(e,t){const n=J-new Date;if(n<0){U();return}const i=Math.floor(n/(1e3*60*60)),r=Math.floor(n%(1e3*60*60)/(1e3*60)),o=Math.floor(n%(1e3*60)/1e3);re.textContent=`${x(i)}:${x(r)}:${x(o)}`;const s=_[e];ie.textContent=t?`${s} (Yarın)`:s}function he(){const e=new Date,t={day:"2-digit",month:"long",year:"numeric"},a=e.toLocaleDateString("tr-TR",t);ne.textContent=a}function x(e){return e.toString().padStart(2,"0")}function ke(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");if(!e||e.length===0){console.warn("Tab buttons not found");return}e.forEach(a=>{a.addEventListener("click",function(){const n=this.getAttribute("data-tab");e.forEach(r=>r.classList.remove("active")),t.forEach(r=>r.classList.remove("active")),this.classList.add("active");const i=document.getElementById(n+"-content");i&&i.classList.add("active")})})}function ye(){if(!l||!l.timings)return;const e=l.timings,t=C(e.Sunrise),a=new Date(t.getTime()+1200*1e3),n=new Date;n.setHours(10,30,0,0);const i=C(e.Maghrib),r=new Date(i.getTime()+900*1e3);f={israk:S(a),kusluk:S(n),evvabin:S(r)}}function C(e){const[t,a]=e.split(":").map(Number),n=new Date;return n.setHours(t,a,0,0),n}function S(e){const t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return`${t}:${a}`}function fe(){var a;const e=[{id:"teheccud",name:"Teheccüd",time:((a=l==null?void 0:l.timings)==null?void 0:a.Tahajjud)||"--:--",description:"İmsak'tan 1 saat önce"},{id:"israk",name:"İşrak",time:f.israk,description:"Güneş doğduktan 20 dk sonra"},{id:"kusluk",name:"Kuşluk",time:f.kusluk,description:"Sabah ortası"},{id:"evvabin",name:"Evvabin",time:f.evvabin,description:"Akşam-Yatsı arası"}],t=V();oe.innerHTML=e.map(n=>{const i=t[n.id]||!1;return`
      <div class="nafile-item ${i?"completed":""}" data-prayer-id="${n.id}">
        <div class="nafile-item-info">
          <div class="nafile-name">${n.name}</div>
          <div class="nafile-time">${n.time} - ${n.description}</div>
        </div>
        <label class="nafile-checkbox">
          <input type="checkbox" id="nafile-${n.id}" name="nafile-${n.id}" ${i?"checked":""} onchange="handleNafileCheckbox('${n.id}', this.checked)">
          <span class="checkbox-custom"></span>
        </label>
      </div>
    `}).join("")}function be(e,t){ge(e,t);const a=document.querySelector(`[data-prayer-id="${e}"]`);t?a.classList.add("completed"):a.classList.remove("completed")}function ge(e,t){const a=V();a[e]=t,localStorage.setItem("nafileCheckboxes",JSON.stringify(a))}function V(){const e=new Date().toDateString(),t=localStorage.getItem("nafileCheckboxes");return localStorage.getItem("nafileCheckboxesDate")!==e?(localStorage.setItem("nafileCheckboxesDate",e),localStorage.removeItem("nafileCheckboxes"),{}):t?JSON.parse(t):{}}window.handleNafileCheckbox=be;let m=new Date().getMonth(),h=new Date().getFullYear(),g=null,v={latitude:41.0082,longitude:28.9784};const A=document.getElementById("settings-btn"),Z=document.getElementById("settings-sidebar"),p=document.getElementById("sidebar-overlay"),j=document.getElementById("sidebar-close-btn"),N=document.querySelectorAll(".sidebar-tab-btn"),q=document.getElementById("prev-month-btn"),O=document.getElementById("next-month-btn"),P=document.getElementById("current-month-display"),E=document.getElementById("calendar-tbody"),z=document.getElementById("quotes-list");function ve(){Z.classList.add("active"),p.classList.add("active"),document.body.style.overflow="hidden"}function W(){Z.classList.remove("active"),p.classList.remove("active"),document.body.style.overflow=""}A&&A.addEventListener("click",()=>{ve(),g||T(h,m+1),z&&z.children.length===0&&ze()});j&&j.addEventListener("click",W);p&&p.addEventListener("click",W);N.forEach(e=>{e.addEventListener("click",function(){const t=this.getAttribute("data-sidebar-tab");N.forEach(n=>n.classList.remove("active")),document.querySelectorAll(".sidebar-tab-content").forEach(n=>{n.classList.remove("active")}),this.classList.add("active");const a=document.getElementById(t+"-content");a&&a.classList.add("active")})});q&&q.addEventListener("click",()=>{m--,m<0&&(m=11,h--),T(h,m+1)});O&&O.addEventListener("click",()=>{m++,m>11&&(m=0,h++),T(h,m+1)});async function T(e,t){try{const a=`https://api.aladhan.com/v1/calendar/${e}/${t}?latitude=${v.latitude}&longitude=${v.longitude}&method=${Y}`,i=await(await fetch(a)).json();if(i.code===200&&i.data)g=i.data,pe(),Ee();else throw new Error("Calendar API error")}catch(a){console.error("Aylık takvim yüklenemedi:",a),E&&(E.innerHTML='<tr><td colspan="7" style="text-align:center; padding:20px;">Takvim yüklenemedi</td></tr>')}}function k(e){return e?e.split(" ")[0]:"--:--"}function pe(){if(!g||!E)return;const e=new Date,t=e.getDate(),a=e.getMonth(),n=e.getFullYear(),i=m===a&&h===n;E.innerHTML=g.map((r,o)=>{const s=r.timings,u=o+1;return`
      <tr class="${i&&u===t?"today":""}">
        <td>${u}</td>
        <td>${k(s.Fajr)}</td>
        <td>${k(s.Sunrise)}</td>
        <td>${k(s.Dhuhr)}</td>
        <td>${k(s.Asr)}</td>
        <td>${k(s.Maghrib)}</td>
        <td>${k(s.Isha)}</td>
      </tr>
    `}).join("")}function Ee(){if(!P)return;const e=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];P.textContent=`${e[m]} ${h}`}function ze(){if(!z)return;const e=[{text:"Gelirsiniz ver bana tarikat, sonra bırakırsınız, namaza başlar, bırakırsınız, çarşafı giyer, çıkarırsınız.",author:"Mahmud Efendi (k.s)"},{text:`Şalvar giymekten utanırsınız, sakal, cübbe, çarşaf, uzun entari, bakın İslam kıyafetidir bu. Sen bunları giymekle "ben Müslüman'ım, benim sağlığımda islamiyete kimse yan bakamaz" demek istiyorsun.`,author:"Mahmud Efendi (k.s)"},{text:"Çarşaflarınızı muhafaza ediyorsunuz Elhamdülillah, ama bilmiyorum entarileriniz nasıldır?",author:"Mahmud Efendi (k.s)"},{text:"Kadınların şerefi gizli kalmalarında ve erkeklerle görüşmemelerindedir. Kadın çalışacak diye tutturmuş, sonra aç kalırlarmış. Sen karışmasana, o Allahu Teala yarattığının rızkını verir.",author:"Mahmud Efendi (k.s)"},{text:"Sizin çarşafınız bizim sarığımız, şalvarımız, sizi gören alacağını alıyor, birde tatlı sözlen konuşursan onunla, tamam.",author:"Mahmud Efendi (k.s)"},{text:"Dilenci at üstünde gelse vereceksin, şüpheleniyorsan az ver, şüphelenmiyorsan çok ver.",author:"Mahmud Efendi (k.s)"},{text:"Aklı başında olan adamın evinde televizyon olmaz.",author:"Mahmud Efendi (k.s)"},{text:"En büyük günah sorulursa, nedir? Kafirlere meyletmektir.",author:"Mahmud Efendi (k.s)"},{text:"Karınca bacağı kadar olsa bile ekmek atmayın, bu bizi helak eder.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon hiç Mevla'yı hatırlatır mı? Zehir zakkum akıtıyor.",author:"Mahmud Efendi (k.s)"},{text:"Ruh ile beden bir olmazsa bir milyon kere Allah (c.c) desen boş.",author:"Mahmud Efendi (k.s)"},{text:"Çarşaf giymekle büyük yiğitlik yapıyorsunuz, milletin tesettüre heves etmesine sebep oluyorsunuz.",author:"Mahmud Efendi (k.s)"},{text:"Çarşafınızı iyi muhafaza edin. Şunu yakinen bilin ki; bir çarşafı, bir sarığı bozmakla Çeçenistan'a gelen belayı bize de verebilir Cenab-ı hak.",author:"Mahmud Efendi (k.s)"},{text:"Can vermeli çarşaftan vazgeçmemeli, ne güzel şeydir o.",author:"Mahmud Efendi (k.s)"},{text:"Bu çarşafı giyen hanımlar, bilseler onların sayesinde neler oluyor, yatarken de giyerler. Siz ki Allah için tesettürünüzü muhafaza ettiniz O da sizi muhafaza eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir Hoca yüzbin televizyondan daha tesirlidir.",author:"Mahmud Efendi (k.s)"},{text:"Rabıta muhabbetle olur, muhabbette ittiba ile olur. İttiba edersen seversin ve sevilirsin.",author:"Mahmud Efendi (k.s)"},{text:"Mektubattan uzak kalındığı an feyiz kesilir.",author:"Mahmud Efendi (k.s)"},{text:"Sarığı kabul etmeyenin Peygamberimiz (s.a.v.), Cebrail (a.s.), Allah-u Teala (c.c.)'de kabul etmiyor.",author:"Mahmud Efendi (k.s)"},{text:"Dünya içinde herşey melundur, fakat zikrullah ile meşgul olan emri bil maruf nehy-i anil münker yapan okuyan ve okutan değildir.",author:"Mahmud Efendi (k.s)"},{text:"Avrupa modasına uymak, namazı terk etmekten daha ağır geliyor.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon seyreden dinini sevmiyor demektir.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse asılacağından korktuğu gibi imandan küfre döneceğinden de öyle korkacak.",author:"Mahmud Efendi (k.s)"},{text:"Sen nefsini hak ile meşgul etmezsen, nefis seni batıl ile meşgul eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse emri bil maruf yapacağım diye yola çıksa sonra siyasetten bahsetse, onun azabını kimse ölçemez.",author:"Mahmud Efendi (k.s)"},{text:"Dünya sevgisi insanı şaraptan daha sarhoş eder ve ateşe girmeye cesaret verir.",author:"Mahmud Efendi (k.s)"},{text:"Kalın kafalı nefse uyarsan her yerde rezilsin.",author:"Mahmud Efendi (k.s)"},{text:"İnsan bir nefes sağ olsa çok ilerler.",author:"Mahmud Efendi (k.s)"},{text:"Bütün haramlar nefse dostluk, Mevla'ya (c.c.) düşmanlıktır.",author:"Mahmud Efendi (k.s)"},{text:"Gezdiğimiz yerlerde talebe var, medrese yapacak para yok. Milyarlar gidiyor başka yerlere ama medreseye para yok. Bunların hepsi ahirette acısını çekecek.",author:"Mahmud Efendi (k.s)"},{text:"İlim, amel, ihlas. Üçü bir arada olsun, bunları cemet, dünyayı fethedersin.",author:"Mahmud Efendi (k.s)"},{text:"İnsanlar et gibi, ulemâ tuz gibidir. Tuzsuz et koktuğu gibi, ulemâdan ve onların sohbetinden mahrum kalanlar da kokar.",author:"Mahmud Efendi (k.s)"},{text:"Ey talebeler! Sizler kurumuş toprakların yağmur yüklü bulutlarısınız. Direksiz kubbelerin direklerisiniz.",author:"Mahmud Efendi (k.s)"},{text:"Bugünkü tahsil ölümden ötesini haber vermiyor. Buna siz nasıl yüksek tahsil dersiniz?",author:"Mahmud Efendi (k.s)"},{text:"Bir adam bir kişiye Kur'ân okutsa bütün dünyaya bedeldir. Bize Kur'ân okuyup okutmak ufak bir şey mi geliyor?",author:"Mahmud Efendi (k.s)"},{text:"Bilgisiz bir kimse savaş davuluna benzer; sesi çoktur, içi boştur.",author:"Mahmud Efendi (k.s)"},{text:"İki kişi iki kişiyi kıskanmaz; baba oğlunu, hoca talebesini.",author:"Mahmud Efendi (k.s)"},{text:"Hocaların bir âdeti var: bir âyeti okusalar veya dinleseler, söylemek için hemen cemaat gelir hatırına. Halbuki hatırına önce kendini getirmeli. Farkında değil, başkalarına iyilik edecek, kendini yakacak.",author:"Mahmud Efendi (k.s)"},{text:"İlmi olup da okutmayan, evlerinde boş boş oturan hoca hanımlar keşke iki talebe de olsa okutsaydım da âhirete ev hanımı vasfında gelmeseydim diyecek, bu yola hizmet etmediklerine çok pişman olacaklar.",author:"Mahmud Efendi (k.s)"}];z.innerHTML=e.map(t=>`
    <div class="quote-card">
      <p class="quote-text">${t.text}</p>
      <p class="quote-author">— ${t.author}</p>
    </div>
  `).join("")}const c=document.getElementById("quote-modal-overlay"),H=document.getElementById("quote-modal-close"),K=document.getElementById("quote-modal-text");function Me(){return[{text:"Gelirsiniz ver bana tarikat, sonra bırakırsınız, namaza başlar, bırakırsınız, çarşafı giyer, çıkarırsınız.",author:"Mahmud Efendi (k.s)"},{text:`Şalvar giymekten utanırsınız, sakal, cübbe, çarşaf, uzun entari, bakın İslam kıyafetidir bu. Sen bunları giymekle "ben Müslüman'ım, benim sağlığımda islamiyete kimse yan bakamaz" demek istiyorsun.`,author:"Mahmud Efendi (k.s)"},{text:"Çarşaflarınızı muhafaza ediyorsunuz Elhamdülillah, ama bilmiyorum entarileriniz nasıldır?",author:"Mahmud Efendi (k.s)"},{text:"Kadınların şerefi gizli kalmalarında ve erkeklerle görüşmemelerindedir. Kadın çalışacak diye tutturmuş, sonra aç kalırlarmış. Sen karışmasana, o Allahu Teala yarattığının rızkını verir.",author:"Mahmud Efendi (k.s)"},{text:"Sizin çarşafınız bizim sarığımız, şalvarımız, sizi gören alacağını alıyor, birde tatlı sözlen konuşursan onunla, tamam.",author:"Mahmud Efendi (k.s)"},{text:"Dilenci at üstünde gelse vereceksin, şüpheleniyorsan az ver, şüphelenmiyorsan çok ver.",author:"Mahmud Efendi (k.s)"},{text:"Aklı başında olan adamın evinde televizyon olmaz.",author:"Mahmud Efendi (k.s)"},{text:"En büyük günah sorulursa, nedir? Kafirlere meyletmektir.",author:"Mahmud Efendi (k.s)"},{text:"Karınca bacağı kadar olsa bile ekmek atmayın, bu bizi helak eder.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon hiç Mevla'yı hatırlatır mı? Zehir zakkum akıtıyor.",author:"Mahmud Efendi (k.s)"},{text:"Ruh ile beden bir olmazsa bir milyon kere Allah (c.c) desen boş.",author:"Mahmud Efendi (k.s)"},{text:"Çarşaf giymekle büyük yiğitlik yapıyorsunuz, milletin tesettüre heves etmesine sebep oluyorsunuz.",author:"Mahmud Efendi (k.s)"},{text:"Çarşafınızı iyi muhafaza edin. Şunu yakinen bilin ki; bir çarşafı, bir sarığı bozmakla Çeçenistan'a gelen belayı bize de verebilir Cenab-ı hak.",author:"Mahmud Efendi (k.s)"},{text:"Can vermeli çarşaftan vazgeçmemeli, ne güzel şeydir o.",author:"Mahmud Efendi (k.s)"},{text:"Bu çarşafı giyen hanımlar, bilseler onların sayesinde neler oluyor, yatarken de giyerler. Siz ki Allah için tesettürünüzü muhafaza ettiniz O da sizi muhafaza eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir Hoca yüzbin televizyondan daha tesirlidir.",author:"Mahmud Efendi (k.s)"},{text:"Rabıta muhabbetle olur, muhabbette ittiba ile olur. İttiba edersen seversin ve sevilirsin.",author:"Mahmud Efendi (k.s)"},{text:"Mektubattan uzak kalındığı an feyiz kesilir.",author:"Mahmud Efendi (k.s)"},{text:"Sarığı kabul etmeyenin Peygamberimiz (s.a.v.), Cebrail (a.s.), Allah-u Teala (c.c.)'de kabul etmiyor.",author:"Mahmud Efendi (k.s)"},{text:"Dünya içinde herşey melundur, fakat zikrullah ile meşgul olan emri bil maruf nehy-i anil münker yapan okuyan ve okutan değildir.",author:"Mahmud Efendi (k.s)"},{text:"Avrupa modasına uymak, namazı terk etmekten daha ağır geliyor.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon seyreden dinini sevmiyor demektir.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse asılacağından korktuğu gibi imandan küfre döneceğinden de öyle korkacak.",author:"Mahmud Efendi (k.s)"},{text:"Sen nefsini hak ile meşgul etmezsen, nefis seni batıl ile meşgul eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse emri bil maruf yapacağım diye yola çıksa sonra siyasetten bahsetse, onun azabını kimse ölçemez.",author:"Mahmud Efendi (k.s)"},{text:"Dünya sevgisi insanı şaraptan daha sarhoş eder ve ateşe girmeye cesaret verir.",author:"Mahmud Efendi (k.s)"},{text:"Kalın kafalı nefse uyarsan her yerde rezilsin.",author:"Mahmud Efendi (k.s)"},{text:"İnsan bir nefes sağ olsa çok ilerler.",author:"Mahmud Efendi (k.s)"},{text:"Bütün haramlar nefse dostluk, Mevla'ya (c.c.) düşmanlıktır.",author:"Mahmud Efendi (k.s)"},{text:"Gezdiğimiz yerlerde talebe var, medrese yapacak para yok. Milyarlar gidiyor başka yerlere ama medreseye para yok. Bunların hepsi ahirette acısını çekecek.",author:"Mahmud Efendi (k.s)"},{text:"İlim, amel, ihlas. Üçü bir arada olsun, bunları cemet, dünyayı fethedersin.",author:"Mahmud Efendi (k.s)"},{text:"İnsanlar et gibi, ulemâ tuz gibidir. Tuzsuz et koktuğu gibi, ulemâdan ve onların sohbetinden mahrum kalanlar da kokar.",author:"Mahmud Efendi (k.s)"},{text:"Ey talebeler! Sizler kurumuş toprakların yağmur yüklü bulutlarısınız. Direksiz kubbelerin direklerisiniz.",author:"Mahmud Efendi (k.s)"},{text:"Bugünkü tahsil ölümden ötesini haber vermiyor. Buna siz nasıl yüksek tahsil dersiniz?",author:"Mahmud Efendi (k.s)"},{text:"Bir adam bir kişiye Kur'ân okutsa bütün dünyaya bedeldir. Bize Kur'ân okuyup okutmak ufak bir şey mi geliyor?",author:"Mahmud Efendi (k.s)"},{text:"Bilgisiz bir kimse savaş davuluna benzer; sesi çoktur, içi boştur.",author:"Mahmud Efendi (k.s)"},{text:"İki kişi iki kişiyi kıskanmaz; baba oğlunu, hoca talebesini.",author:"Mahmud Efendi (k.s)"},{text:"Hocaların bir âdeti var: bir âyeti okusalar veya dinleseler, söylemek için hemen cemaat gelir hatırına. Halbuki hatırına önce kendini getirmeli. Farkında değil, başkalarına iyilik edecek, kendini yakacak.",author:"Mahmud Efendi (k.s)"},{text:"İlmi olup da okutmayan, evlerinde boş boş oturan hoca hanımlar keşke iki talebe de olsa okutsaydım da âhirete ev hanımı vasfında gelmeseydim diyecek, bu yola hizmet etmediklerine çok pişman olacaklar.",author:"Mahmud Efendi (k.s)"}]}function xe(){const e=Me(),t=Math.floor(Math.random()*e.length),a=e[t];K&&(K.textContent=a.text),setTimeout(()=>{c&&c.classList.add("active")},800)}function X(){c&&c.classList.remove("active")}H&&H.addEventListener("click",X);c&&c.addEventListener("click",e=>{e.target===c&&X()});ke();le();xe();const ee="qadaPrayerData",Se={counters:{fajr:0,dhuhr:0,asr:0,maghrib:0,isha:0},dailyGoal:2,today:{date:w(),completed:0,prayers:[]},history:[]};function w(){return new Date().toISOString().split("T")[0]}function De(){try{const e=localStorage.getItem(ee);if(e){const t=JSON.parse(e);return te(t),t}}catch(e){console.error("Error loading qada data:",e)}return{...Se}}function B(e){try{localStorage.setItem(ee,JSON.stringify(e))}catch(t){console.error("Error saving qada data:",t),alert("Veri kaydedilemedi. Tarayıcı hafızası dolu olabilir.")}}function te(e){const t=w();e.today.date!==t&&(e.today.completed>0&&(e.history.push({date:e.today.date,completed:e.today.completed,prayers:[...e.today.prayers]}),e.history.length>30&&(e.history=e.history.slice(-30))),e.today={date:t,completed:0,prayers:[]},B(e))}let d=De();function Te(){return Object.values(d.counters).reduce((e,t)=>e+t,0)}function we(){const e=d.history.slice(-7),t=e.reduce((i,r)=>i+r.completed,0);e.length>0&&(t/7).toFixed(1);const a=d.today.completed,n=t+a;return{total:n,average:(n/7).toFixed(1)}}function ae(){["fajr","dhuhr","asr","maghrib","isha"].forEach(r=>{const o=document.getElementById(`counter-${r}`);o&&(o.textContent=d.counters[r]);const s=document.querySelector(`button[onclick="markQadaComplete('${r}')"]`);s&&(d.today.prayers.includes(r)?s.classList.add("completed"):s.classList.remove("completed"))});const t=document.getElementById("total-qada");t&&(t.textContent=Te());const a=we(),n=document.getElementById("stat-7days"),i=document.getElementById("stat-average");n&&(n.textContent=a.total),i&&(i.textContent=a.average)}function L(){const e=document.getElementById("today-progress-text"),t=document.getElementById("today-progress-bar"),a=d.today.completed,n=d.dailyGoal,i=Math.min(a/n*100,100);e&&(e.textContent=`${a}/${n} kaza kılındı`),t&&(t.style.width=`${i}%`)}const b=document.getElementById("daily-goal");b&&(b.value=d.dailyGoal,b.addEventListener("change",e=>{d.dailyGoal=parseInt(e.target.value),B(d),L()}));const R=document.getElementById("export-qada-btn");R&&R.addEventListener("click",()=>{const e=JSON.stringify(d,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`kaza_namazlari_${w()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),alert("Yedek dosyası indirildi! ✅")});const G=document.getElementById("import-qada-btn"),y=document.getElementById("import-qada-file");G&&y&&(G.addEventListener("click",()=>{y.click()}),y.addEventListener("change",e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=n=>{try{const i=JSON.parse(n.target.result);if(!i.counters||!i.dailyGoal)throw new Error("Geçersiz dosya formatı");confirm("Mevcut veriler silinecek ve yedek yüklenecek. Devam edilsin mi?")&&(d=i,te(d),B(d),b.value=d.dailyGoal,ae(),L(),alert("Yedek başarıyla yüklendi! ✅"))}catch(i){console.error("Import error:",i),alert("Geçersiz yedek dosyası! ❌")}y.value=""},a.readAsText(t)}));ae();L();

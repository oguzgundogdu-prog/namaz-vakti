(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const A=document.getElementById("location-name"),K=document.getElementById("date-display"),Y=document.getElementById("next-prayer-name"),F=document.getElementById("countdown"),B=document.getElementById("prayer-times-list"),G=document.getElementById("nafile-list"),_="https://api.aladhan.com/v1/timings",j=13,N={Tahajjud:"Teheccüd",Fajr:"İmsak",Sunrise:"Güneş",Dhuhr:"Öğle",Asr:"İkindi",Maghrib:"Akşam",Isha:"Yatsı"},M=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];let o=null,P=null,p=null,h={};async function J(){W();try{const e=await U(),{latitude:a,longitude:t}=e.coords;y={latitude:a,longitude:t},await z(a,t),await Q(a,t)}catch(e){console.error("Konum hatası:",e),A.textContent="İstanbul",y={latitude:41.0082,longitude:28.9784},await z(41.0082,28.9784)}}function U(){return new Promise((e,a)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,a):a(new Error("Geolocation not supported"))})}async function Q(e,a){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${a}&accept-language=tr`)).json();if(n&&n.address){const i=n.address.city||n.address.town||n.address.village||n.address.state||"İstanbul";A.textContent=i}}catch(t){console.error("Konum ismi alınamadı:",t)}}async function z(e,a){try{const t=Math.floor(Date.now()/1e3),n=`${_}/${t}?latitude=${e}&longitude=${a}&method=${j}`,r=await(await fetch(n)).json();if(r.code===200)o=r.data,V(),ee(),Z(),te(),H();else throw new Error("API error")}catch(t){console.error("Namaz vakitleri alınamadı:",t),B.innerHTML='<p style="text-align:center;">Veriler yüklenemedi. Lütfen tekrar deneyin.</p>'}}function V(){if(!o||!o.timings)return;const e=o.timings.Fajr,[a,t]=e.split(":").map(Number),n=new Date;n.setHours(a,t,0,0);const i=new Date(n.getTime()-3600*1e3),r=i.getHours().toString().padStart(2,"0"),s=i.getMinutes().toString().padStart(2,"0");o.timings.Tahajjud=`${r}:${s}`}function Z(){if(!o)return;const e=o.timings,a=new Date;B.innerHTML=M.map(t=>{const n=e[t],[i,r]=n.split(":").map(Number),s=new Date;return s.setHours(i,r,0,0),`
      <div class="prayer-item ${s<a?"past":""}" data-prayer="${t}">
        <span class="prayer-name">${N[t]}</span>
        <span class="prayer-time">${n}</span>
      </div>
    `}).join("")}function H(){if(!o)return;const e=o.timings,a=new Date;let t=null,n=!1;for(const i of M){const r=e[i],[s,l]=r.split(":").map(Number),d=new Date;if(d.setHours(s,l,0,0),d>a){t={key:i,time:d};break}}if(!t){const i=M[0],r=e[i],[s,l]=r.split(":").map(Number),d=new Date;d.setDate(d.getDate()+1),d.setHours(s,l,0,0),t={key:i,time:d},n=!0}P=t.time,document.querySelectorAll(".prayer-item").forEach(i=>{i.dataset.prayer===t.key&&!n&&i.classList.add("active")}),p&&clearInterval(p),w(t.key,n),p=setInterval(()=>w(t.key,n),1e3)}function w(e,a){const n=P-new Date;if(n<0){H();return}const i=Math.floor(n/(1e3*60*60)),r=Math.floor(n%(1e3*60*60)/(1e3*60)),s=Math.floor(n%(1e3*60)/1e3);F.textContent=`${v(i)}:${v(r)}:${v(s)}`;const l=N[e];Y.textContent=a?`${l} (Yarın)`:l}function W(){const e=new Date,a={day:"2-digit",month:"long",year:"numeric"},t=e.toLocaleDateString("tr-TR",a);K.textContent=t}function v(e){return e.toString().padStart(2,"0")}function X(){const e=document.querySelectorAll(".tab-btn"),a=document.querySelectorAll(".tab-content");if(!e||e.length===0){console.warn("Tab buttons not found");return}e.forEach(t=>{t.addEventListener("click",function(){const n=this.getAttribute("data-tab");e.forEach(r=>r.classList.remove("active")),a.forEach(r=>r.classList.remove("active")),this.classList.add("active");const i=document.getElementById(n+"-content");i&&i.classList.add("active")})})}function ee(){if(!o||!o.timings)return;const e=o.timings,a=T(e.Sunrise),t=new Date(a.getTime()+1200*1e3),n=new Date;n.setHours(10,30,0,0);const i=T(e.Maghrib),r=new Date(i.getTime()+900*1e3);h={israk:E(t),kusluk:E(n),evvabin:E(r)}}function T(e){const[a,t]=e.split(":").map(Number),n=new Date;return n.setHours(a,t,0,0),n}function E(e){const a=e.getHours().toString().padStart(2,"0"),t=e.getMinutes().toString().padStart(2,"0");return`${a}:${t}`}function te(){var t;const e=[{id:"teheccud",name:"Teheccüd",time:((t=o==null?void 0:o.timings)==null?void 0:t.Tahajjud)||"--:--",description:"İmsak'tan 1 saat önce"},{id:"israk",name:"İşrak",time:h.israk,description:"Güneş doğduktan 20 dk sonra"},{id:"kusluk",name:"Kuşluk",time:h.kusluk,description:"Sabah ortası"},{id:"evvabin",name:"Evvabin",time:h.evvabin,description:"Akşam-Yatsı arası"}],a=O();G.innerHTML=e.map(n=>{const i=a[n.id]||!1;return`
      <div class="nafile-item ${i?"completed":""}" data-prayer-id="${n.id}">
        <div class="nafile-item-info">
          <div class="nafile-name">${n.name}</div>
          <div class="nafile-time">${n.time} - ${n.description}</div>
        </div>
        <label class="nafile-checkbox">
          <input type="checkbox" id="nafile-${n.id}" name="nafile-${n.id}" ${i?"checked":""} onchange="handleNafileCheckbox('${n.id}', this.checked)">
          <span class="checkbox-custom"></span>
        </label>
      </div>
    `}).join("")}function ae(e,a){ne(e,a);const t=document.querySelector(`[data-prayer-id="${e}"]`);a?t.classList.add("completed"):t.classList.remove("completed")}function ne(e,a){const t=O();t[e]=a,localStorage.setItem("nafileCheckboxes",JSON.stringify(t))}function O(){const e=new Date().toDateString(),a=localStorage.getItem("nafileCheckboxes");return localStorage.getItem("nafileCheckboxesDate")!==e?(localStorage.setItem("nafileCheckboxesDate",e),localStorage.removeItem("nafileCheckboxes"),{}):a?JSON.parse(a):{}}window.handleNafileCheckbox=ae;let c=new Date().getMonth(),u=new Date().getFullYear(),f=null,y={latitude:41.0082,longitude:28.9784};const S=document.getElementById("settings-btn"),q=document.getElementById("settings-sidebar"),k=document.getElementById("sidebar-overlay"),D=document.getElementById("sidebar-close-btn"),$=document.querySelectorAll(".sidebar-tab-btn"),L=document.getElementById("prev-month-btn"),C=document.getElementById("next-month-btn"),I=document.getElementById("current-month-display"),b=document.getElementById("calendar-tbody"),g=document.getElementById("quotes-list");function ie(){q.classList.add("active"),k.classList.add("active"),document.body.style.overflow="hidden"}function R(){q.classList.remove("active"),k.classList.remove("active"),document.body.style.overflow=""}S&&S.addEventListener("click",()=>{ie(),f||x(u,c+1),g&&g.children.length===0&&oe()});D&&D.addEventListener("click",R);k&&k.addEventListener("click",R);$.forEach(e=>{e.addEventListener("click",function(){const a=this.getAttribute("data-sidebar-tab");$.forEach(n=>n.classList.remove("active")),document.querySelectorAll(".sidebar-tab-content").forEach(n=>{n.classList.remove("active")}),this.classList.add("active");const t=document.getElementById(a+"-content");t&&t.classList.add("active")})});L&&L.addEventListener("click",()=>{c--,c<0&&(c=11,u--),x(u,c+1)});C&&C.addEventListener("click",()=>{c++,c>11&&(c=0,u++),x(u,c+1)});async function x(e,a){try{const t=`https://api.aladhan.com/v1/calendar/${e}/${a}?latitude=${y.latitude}&longitude=${y.longitude}&method=${j}`,i=await(await fetch(t)).json();if(i.code===200&&i.data)f=i.data,re(),se();else throw new Error("Calendar API error")}catch(t){console.error("Aylık takvim yüklenemedi:",t),b&&(b.innerHTML='<tr><td colspan="7" style="text-align:center; padding:20px;">Takvim yüklenemedi</td></tr>')}}function m(e){return e?e.split(" ")[0]:"--:--"}function re(){if(!f||!b)return;const e=new Date,a=e.getDate(),t=e.getMonth(),n=e.getFullYear(),i=c===t&&u===n;b.innerHTML=f.map((r,s)=>{const l=r.timings,d=s+1;return`
      <tr class="${i&&d===a?"today":""}">
        <td>${d}</td>
        <td>${m(l.Fajr)}</td>
        <td>${m(l.Sunrise)}</td>
        <td>${m(l.Dhuhr)}</td>
        <td>${m(l.Asr)}</td>
        <td>${m(l.Maghrib)}</td>
        <td>${m(l.Isha)}</td>
      </tr>
    `}).join("")}function se(){if(!I)return;const e=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];I.textContent=`${e[c]} ${u}`}function oe(){if(!g)return;const e=[{text:"Gelirsiniz ver bana tarikat, sonra bırakırsınız, namaza başlar, bırakırsınız, çarşafı giyer, çıkarırsınız.",author:"Mahmud Efendi (k.s)"},{text:`Şalvar giymekten utanırsınız, sakal, cübbe, çarşaf, uzun entari, bakın İslam kıyafetidir bu. Sen bunları giymekle "ben Müslüman'ım, benim sağlığımda islamiyete kimse yan bakamaz" demek istiyorsun.`,author:"Mahmud Efendi (k.s)"},{text:"Çarşaflarınızı muhafaza ediyorsunuz Elhamdülillah, ama bilmiyorum entarileriniz nasıldır?",author:"Mahmud Efendi (k.s)"},{text:"Kadınların şerefi gizli kalmalarında ve erkeklerle görüşmemelerindedir. Kadın çalışacak diye tutturmuş, sonra aç kalırlarmış. Sen karışmasana, o Allahu Teala yarattığının rızkını verir.",author:"Mahmud Efendi (k.s)"},{text:"Sizin çarşafınız bizim sarığımız, şalvarımız, sizi gören alacağını alıyor, birde tatlı sözlen konuşursan onunla, tamam.",author:"Mahmud Efendi (k.s)"},{text:"Dilenci at üstünde gelse vereceksin, şüpheleniyorsan az ver, şüphelenmiyorsan çok ver.",author:"Mahmud Efendi (k.s)"},{text:"Aklı başında olan adamın evinde televizyon olmaz.",author:"Mahmud Efendi (k.s)"},{text:"En büyük günah sorulursa, nedir? Kafirlere meyletmektir.",author:"Mahmud Efendi (k.s)"},{text:"Karınca bacağı kadar olsa bile ekmek atmayın, bu bizi helak eder.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon hiç Mevla'yı hatırlatır mı? Zehir zakkum akıtıyor.",author:"Mahmud Efendi (k.s)"},{text:"Ruh ile beden bir olmazsa bir milyon kere Allah (c.c) desen boş.",author:"Mahmud Efendi (k.s)"},{text:"Çarşaf giymekle büyük yiğitlik yapıyorsunuz, milletin tesettüre heves etmesine sebep oluyorsunuz.",author:"Mahmud Efendi (k.s)"},{text:"Çarşafınızı iyi muhafaza edin. Şunu yakinen bilin ki; bir çarşafı, bir sarığı bozmakla Çeçenistan'a gelen belayı bize de verebilir Cenab-ı hak.",author:"Mahmud Efendi (k.s)"},{text:"Can vermeli çarşaftan vazgeçmemeli, ne güzel şeydir o.",author:"Mahmud Efendi (k.s)"},{text:"Bu çarşafı giyen hanımlar, bilseler onların sayesinde neler oluyor, yatarken de giyerler. Siz ki Allah için tesettürünüzü muhafaza ettiniz O da sizi muhafaza eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir Hoca yüzbin televizyondan daha tesirlidir.",author:"Mahmud Efendi (k.s)"},{text:"Rabıta muhabbetle olur, muhabbette ittiba ile olur. İttiba edersen seversin ve sevilirsin.",author:"Mahmud Efendi (k.s)"},{text:"Mektubattan uzak kalındığı an feyiz kesilir.",author:"Mahmud Efendi (k.s)"},{text:"Sarığı kabul etmeyenin Peygamberimiz (s.a.v.), Cebrail (a.s.), Allah-u Teala (c.c.)'de kabul etmiyor.",author:"Mahmud Efendi (k.s)"},{text:"Dünya içinde herşey melundur, fakat zikrullah ile meşgul olan emri bil maruf nehy-i anil münker yapan okuyan ve okutan değildir.",author:"Mahmud Efendi (k.s)"},{text:"Avrupa modasına uymak, namazı terk etmekten daha ağır geliyor.",author:"Mahmud Efendi (k.s)"},{text:"Televizyon seyreden dinini sevmiyor demektir.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse asılacağından korktuğu gibi imandan küfre döneceğinden de öyle korkacak.",author:"Mahmud Efendi (k.s)"},{text:"Sen nefsini hak ile meşgul etmezsen, nefis seni batıl ile meşgul eder.",author:"Mahmud Efendi (k.s)"},{text:"Bir kimse emri bil maruf yapacağım diye yola çıksa sonra siyasetten bahsetse, onun azabını kimse ölçemez.",author:"Mahmud Efendi (k.s)"},{text:"Dünya sevgisi insanı şaraptan daha sarhoş eder ve ateşe girmeye cesaret verir.",author:"Mahmud Efendi (k.s)"},{text:"Kalın kafalı nefse uyarsan her yerde rezilsin.",author:"Mahmud Efendi (k.s)"},{text:"İnsan bir nefes sağ olsa çok ilerler.",author:"Mahmud Efendi (k.s)"},{text:"Bütün haramlar nefse dostluk, Mevla'ya (c.c.) düşmanlıktır.",author:"Mahmud Efendi (k.s)"},{text:"Gezdiğimiz yerlerde talebe var, medrese yapacak para yok. Milyarlar gidiyor başka yerlere ama medreseye para yok. Bunların hepsi ahirette acısını çekecek.",author:"Mahmud Efendi (k.s)"}];g.innerHTML=e.map(a=>`
    <div class="quote-card">
      <p class="quote-text">${a.text}</p>
      <p class="quote-author">— ${a.author}</p>
    </div>
  `).join("")}X();J();
